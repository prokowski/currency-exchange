# ===================================================================
# INTEGRATION TEST PROPERTIES
# ===================================================================
# This file overrides the main application.properties for tests in the 'integration' source set.

# ===================================================================
# DATA SOURCE CONFIGURATION (H2 Database for Tests)
# ===================================================================

# Use a separate, file-based H2 database for integration tests to ensure isolation.
spring.datasource.url=jdbc:h2:file:./data/test_currency_exchange_db
spring.datasource.driverClassName=org.h2.Driver
spring.datasource.username=sa
spring.datasource.password=


# ===================================================================
# JPA / HIBERNATE CONFIGURATION
# ===================================================================

# Use the H2 database dialect.
spring.jpa.database-platform=org.hibernate.dialect.H2Dialect

# 'validate' makes Hibernate check the schema against the entities at startup.
spring.jpa.hibernate.ddl-auto=validate


# ===================================================================
# FLYWAY DATABASE MIGRATION
# ===================================================================

# Enable Flyway database migration for tests.
spring.flyway.enabled=true

# Use the same migration scripts as the main application.
spring.flyway.locations=classpath:db/migration/global

# Allows Flyway to run on a non-empty schema and create a baseline.
spring.flyway.baselineOnMigrate=true


# ===================================================================
# CUSTOM APPLICATION PROPERTIES
# ===================================================================

# URL template for the NBP (National Bank of Poland) API.
# This will be overridden by mocks in controller tests, but it's good practice to have it here.
currencyexchange.nbp.api.url.template=http://api.nbp.pl/api/exchangerates/rates/a/{currencyCode}/?format=json